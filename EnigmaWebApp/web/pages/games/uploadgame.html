<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enigma Server</title>
    <script type="text/javascript" src="jquery-2.0.3.min.js"></script>

    <script type="text/javascript" language="javascript">
        $(function() { // onload...do
            $("#uploadForm").submit(function() {
                var file1 = this[0].files[0];
                var formData = new FormData();
                formData.append("fake-key-1", file1);

                $.ajax({
                    method:'POST',
                    data: formData,
                    url: this.action,
                    processData: false, // Don't process the files
                    contentType: false, // Set content type to false as jQuery will tell the server its a query string request
                    timeout: 4000,
                    error: function(e) {
                        console.error("Failed to submit");
                        $("#result").text("Failed to get result from server " + e);
                    },
                    success: $.get("game"+data+".html", function(data, status){
                        console.log("Data: " + data + "\nStatus: " + status);
                    })
                });
                // return value of the submit operation
                // by default - we'll always return false so it doesn't redirect the user.
                return false;
            })
        })
    </script>
</head>
<body>
    <h3>Select Your Enigma Game XML File:</h3>
    <form id="uploadForm" action="/pages/games/newgame" enctype="multipart/form-data" method="POST">
        <input type="file" name="xmlFile"><br><br>
        <input type="Submit" value="Upload File"><br>
    </form>
</body>
</html>